(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fde1e3c"],{"670a":function(r,e,t){"use strict";t("d93f")},b73a:function(r,e,t){"use strict";t.r(e);var s=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"components-container"},[t("el-form",{ref:"passwordForm",staticStyle:{width:"60%","margin-left":"-10%"},attrs:{rules:r.rules,model:r.passwordForm,"label-position":"left","label-width":"20%"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"oldpassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入旧密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.handleQuery(e)}},model:{value:r.passwordForm.oldpassword,callback:function(e){r.$set(r.passwordForm,"oldpassword",e)},expression:"passwordForm.oldpassword"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"newpassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入新密码..."},model:{value:r.passwordForm.newpassword,callback:function(e){r.$set(r.passwordForm,"newpassword",e)},expression:"passwordForm.newpassword"}})],1),t("el-form-item",{attrs:{label:"再次输入",prop:"repetpassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码..."},model:{value:r.passwordForm.repetpassword,callback:function(e){r.$set(r.passwordForm,"repetpassword",e)},expression:"passwordForm.repetpassword"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{width:"15%","margin-left":"6%"},attrs:{type:"primary"},on:{click:function(e){return r.resetForm("passwordForm")}}},[r._v("重置")]),t("el-button",{staticStyle:{width:"15%","margin-left":"10%"},attrs:{type:"primary"},on:{click:function(e){return r.submitForm("passwordForm")}}},[r._v(" 确认 ")])],1)],1)},o=[],a=t("1da1"),n=(t("96cf"),t("c24f")),i=t("5258"),d=t("5f87"),p=t("61f7"),l={name:"ChangePassword",data:function(){var r=this,e=function(r,e,t){if(!Object(p["b"])(e))return t(new Error("密码必须由数字、字母、特殊字符组合,长度在8-16位之间"));t()},t=function(e,t,s){if(!Object(p["b"])(t))return s(new Error("密码必须由数字、字母、特殊字符组合,长度在8-16位之间"));t!==r.passwordForm.newpassword?s(new Error("两次输入密码不一致!")):s()};return{passwordForm:{oldpassword:"",newpassword:"",repetpassword:""},rules:{oldpassword:[{required:!0,trigger:"change",validator:e}],newpassword:[{required:!0,trigger:"change",validator:e}],repetpassword:[{required:!0,trigger:"change",validator:t}]}}},methods:{handleQuery:function(){var r={password:this.passwordForm.oldpassword,token:Object(d["a"])()};r=JSON.stringify(r);var e={data:Object(i["a"])(r)};return Object(n["f"])(e).then((function(){return!0})),!1},submitForm:function(r){var e=this;this.$refs[r].validate((function(r){if(!r)return e.$notify({message:"表单验证失败",type:"eerror",center:!0,duration:2e3}),!1;var t={oldpassword:e.passwordForm.oldpassword,newpassword:e.passwordForm.newpassword,token:Object(d["a"])()};t=JSON.stringify(t);var s={data:Object(i["a"])(t)};Object(n["b"])(s).then((function(){e.$notify({message:"密码修改成功,请重新登陆",type:"success",center:!0,duration:3e3}),setTimeout((function(){e.logout()}),3e3)}))}))},resetForm:function(r){this.$refs[r].resetFields()},logout:function(){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$store.dispatch("user/logout");case 2:r.$router.push("/login?redirect=".concat(r.$route.fullPath));case 3:case"end":return e.stop()}}),e)})))()}}},c=l,u=(t("670a"),t("2877")),w=Object(u["a"])(c,s,o,!1,null,"107562e4",null);e["default"]=w.exports},d93f:function(r,e,t){}}]);